# Launch Todo - 2025.01.13 (Updated)

---

## 🔴 P0: 런칭 전 필수 (사용자 영향)

### 1. 실패 테스트 수정 ⚠️ 필수
**현황**: 32개 실패 / 219개 통과 (251개 중)

| 파일 | 실패 수 | 원인 |
|------|---------|------|
| `api-response.test.ts` | 19개 | API 응답 포맷 변경됨 (테스트 미동기화) |
| `rate-limit.test.ts` | 13개 | Rate limit 설정 변경됨 (테스트 미동기화) |

**왜 중요한가**: 테스트 실패 = 코드 변경 후 버그 감지 불가

**해결 방안**:
```bash
npm test tests/lib/api-response.test.ts
npm test tests/lib/rate-limit.test.ts
```
- [ ] api-response.test.ts 현행 코드에 맞게 업데이트
- [ ] rate-limit.test.ts 현행 설정에 맞게 업데이트

---

### 2. Paddle Sandbox 결제 테스트 ⏸️ 대기 (승인 후)
**현황**: 코드 준비됨, Paddle 계정 승인 대기 중

**왜 중요한가**: 실 결제 연동 없이 런칭 불가

**사전 조건**:
- [ ] Paddle Sandbox 계정 승인 완료
- [ ] 환경변수 설정 (PADDLE_API_KEY, WEBHOOK_SECRET 등)
- [ ] Webhook URL 등록

**테스트 시나리오**:
| # | 시나리오 | 테스트 카드 |
|---|----------|-------------|
| 1 | 구독 생성 → Webhook 수신 | 4242 4242 4242 4242 |
| 2 | 전액 환불 (14일 이내) | - |
| 3 | 환불 거부 (14일 경과) | - |
| 4 | 구독 취소 → 다운그레이드 | - |

---

### 3. E2E Playwright 테스트 ⏸️ 대기
**현황**: 테스트 파일 준비됨, 실행 환경 미구성

**왜 중요한가**: 사용자 플로우 통합 테스트 없이 런칭 위험

**사전 조건**:
- [ ] 테스트 계정 생성 (TEST_USER_EMAIL/PASSWORD)
- [ ] 테스트 파일 준비 (low_quality_resume.pdf, high_quality_resume.pdf)

**테스트 시나리오**:
- [ ] 이력서 업로드 → 분석 완료 → 결과 확인
- [ ] 저품질 이력서 → 자동 환불 → 토스트 알림
- [ ] 검색 → 필터 → 결과 표시

---

## 🟡 P1: 런칭 전 권장 (운영 안정성)

### 1. CI/CD 파이프라인 구축
**현황**: 없음 (수동 배포)

**왜 중요한가**:
- 테스트 통과 없이 배포 가능 → 버그 배포 위험
- 롤백 프로세스 없음

**권장 조치**:
```yaml
# GitHub Actions 예시
on: [push]
jobs:
  test:
    - npm test
    - npm run build
  deploy:
    needs: test
    - vercel deploy --prod
```

---

### 2. RLS(Row Level Security) 검증
**현황**: 일부 API route에 user_id 검증 누락 가능성

**왜 중요한가**: 다른 사용자 데이터 접근 가능 (보안 이슈)

**검증 대상**:
- [ ] `/api/candidates/*` - user_id 검증
- [ ] `/api/search` - user_id 필터
- [ ] `/api/refunds/*` - 본인 환불만 가능

---

## 🟢 완료 항목

### Unit Tests ✅ (2026-01-13)
- [x] 품질 환불 조건 검증 (54개 테스트 PASSED)
- [x] EC-001 ~ EC-025: confidence score 경계값
- [x] EC-063 ~ EC-070: 구독 환불 14일 정책
- [x] EC-071 ~ EC-075: 3-Way 불일치 환불

### k6 부하 테스트 ✅ (2026-01-13)
- [x] 이중 환불 방지 (20 VU 동시 요청 → 중복 0건)
- [x] 대량 처리 (50 TPS × 1분)
- [x] 스파이크 테스트 (10→100→10 TPS)

### 3-Way Cross-Check ✅ (2026-01-13)
- [x] Claude 연동 (analyst_agent.py)
- [x] 다수결 로직 구현
- [x] 3-Way 불일치 자동 환불 정책 추가

### Paddle 정책 동기화 ✅ (2026-01-13)
- [x] 14일 무조건 전액환불 정책 적용
- [x] 법인명 수정 (포텐시아 주식회사)
- [x] 모든 환불 코드 동기화

### AI Search Stability ✅ (2026-01-13)
- [x] Timeout, Retry, Fallback 적용
- [x] Circuit Breaker 구현
- [x] Metrics & Alerting 설정

---

## ⚪ 런칭 후 개선 (백로그)

| 항목 | 우선순위 | 비고 |
|------|----------|------|
| 스킬 배열 제한 100→200 | Low | 현재 문제 발생 빈도 낮음 |
| 에러 핸들링 표준화 | Low | 코드 품질 개선 |
| 코드 스플리팅 | Low | 성능 최적화 |
| ~~스킬 정규화 시스템~~ | ~~취소~~ | AI Semantic Search가 처리 |

---

## 요약

```
┌─────────────────────────────────────────────────────────────┐
│                    런칭 체크리스트                           │
├─────────────────────────────────────────────────────────────┤
│ 🔴 P0 (필수)                                                │
│   [ ] 32개 실패 테스트 수정                                 │
│   [ ] Paddle Sandbox 테스트 (승인 후)                       │
│   [ ] E2E Playwright 테스트                                 │
├─────────────────────────────────────────────────────────────┤
│ 🟡 P1 (권장)                                                │
│   [ ] CI/CD 파이프라인                                      │
│   [ ] RLS 보안 검증                                         │
├─────────────────────────────────────────────────────────────┤
│ 🟢 완료                                                     │
│   [x] Unit Tests (54개)                                     │
│   [x] k6 부하 테스트                                        │
│   [x] 3-Way Cross-Check                                     │
│   [x] Paddle 정책 동기화                                    │
│   [x] AI Search Stability                                   │
└─────────────────────────────────────────────────────────────┘
```

---

**문의**: Development Team
**긴급 연락**: Slack #dev-qa
